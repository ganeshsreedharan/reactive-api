<html>
<body>



<!-- Receive saved event -->
<div id="content"></div>

<script>


    let source = new EventSource("posts");

    source.addEventListener('message', function (e) {
        console.log('New message is received');
        const index = JSON.parse(e.data);
        const content = `New event added: ${ JSON.stringify(index)}<br>`;
        document.getElementById("content").innerHTML += content;
    }, false);

    source.addEventListener('open', function(e) {
        console.log('The connection has been opened');
    }, false);

    source.addEventListener('error', function(e) {
        if (e.readyState == EventSource.CLOSED){
            console.log('The connection has been closed');
        }
    }, false);


</script>
</body>
<html>
